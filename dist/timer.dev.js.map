{"version":3,"sources":["timer.js"],"names":["whatLessonNow","time","day","my_getWeekDay","currentDate","saturday","sunday","i","get_lessons","lesson","get_startTime","get_time","get_endTime","length","currentStatus","status","toString","call","document","getElementById","innerHTML","get_name","estTime","style","margin","nextLesson","get_additionalName","dayNumber","getDayNumber","week","friday","maxBreakLength","get_lessonAmount","weel","next_lesson","type","est","secondsToTime","timeToSeconds","currentTime","setInterval"],"mappings":"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","sourcesContent":["// Tracking current lesson and next lesson. And giving it to the page. Counting estimated time ti the next lesson\r\n\r\n\r\n\r\n// Getting current lesson (object)\r\nfunction whatLessonNow(time) {\r\n\r\n    // Getting current time and day (in object)\r\n    var day = my_getWeekDay(currentDate(time));\r\n\r\n    // Weekend case\r\n    if (day == saturday | day == sunday) {\r\n        return 'weekend';\r\n    }\r\n\r\n    // Loop that running at lessons array and getting current lesson\r\n    for (i in day.get_lessons()){\r\n\r\n        let lesson = day.get_lessons()[i];\r\n\r\n        if (time >= lesson.get_startTime().get_time() & time <= lesson.get_endTime().get_time()) {\r\n            return lesson;\r\n        }\r\n    }\r\n\r\n    // Time after lessons ('15:00') case\r\n    if (time >= day.get_lessons()[day.get_lessons().length - 1].get_endTime().get_time() ) {\r\n        return 'after';\r\n    }\r\n\r\n    // Time before lessons ('8:14') case\r\n    if (time + 1 <= day.get_lessons()[0].get_startTime().get_time()) {\r\n        return 'before';\r\n    }\r\n\r\n    // Break case\r\n    return 'break';\r\n}\r\n\r\n// Creating output from current status\r\nfunction currentStatus(status, time) {\r\n\r\n    // lesson\r\n    if (toString.call(status) == '[object Object]') {\r\n        document.getElementById('current_subtitle').innerHTML = 'Сейчас';\r\n        document.getElementById('current_status').innerHTML = status.get_name();\r\n        document.getElementById('current_time_name').innerHTML = 'Осталось';\r\n        document.getElementById('current_time').innerHTML = estTime('lesson', time);\r\n        document.getElementById('week').style.margin = '110px 0 0 0';\r\n    }\r\n\r\n    // break\r\n    if (status == 'break') {\r\n        document.getElementById('current_subtitle').innerHTML = 'Сейчас';\r\n        document.getElementById('current_status').innerHTML = 'Перемена';\r\n        document.getElementById('current_time_name').innerHTML = 'До ' + nextLesson(time).get_additionalName();\r\n        document.getElementById('current_time').innerHTML = estTime('break', time);\r\n        document.getElementById('week').style.margin = '110px 0 0 0';\r\n    }\r\n\r\n    // time before lessons\r\n    if (status == 'before') {\r\n        document.getElementById('current_subtitle').innerHTML = 'Сейчас';\r\n        document.getElementById('current_status').innerHTML = 'Уроки ещё не начались';\r\n        document.getElementById('current_time_name').innerHTML = 'До ' + nextLesson(time).get_additionalName();\r\n        document.getElementById('current_time').innerHTML = estTime('before', time);\r\n        document.getElementById('week').style.margin = '140px 0 0 0';\r\n    }\r\n\r\n    // time after lessons\r\n    if (status == 'after') {\r\n        document.getElementById('current_subtitle').innerHTML = 'Сейчас';\r\n        document.getElementById('current_status').innerHTML = 'Уроки уже закончились';\r\n        document.getElementById('current_time_name').innerHTML = 'До ' + nextLesson(time).get_additionalName();\r\n        document.getElementById('current_time').innerHTML = estTime('after', time);\r\n        document.getElementById('week').style.margin = '140px 0 0 0';\r\n    }\r\n\r\n    // weekend\r\n    if (status == 'weekend') {\r\n        document.getElementById('current_subtitle').innerHTML = 'Сегодня';\r\n        document.getElementById('current_status').innerHTML = 'Выходной';\r\n        document.getElementById('current_time_name').innerHTML = 'До уроков:';\r\n        document.getElementById('current_time').innerHTML = estTime('before', time).toString();\r\n        document.getElementById('week').style.margin = '110px 0 0 0';\r\n    }\r\n}\r\n\r\n// Function which understand which lesson is the next\r\nfunction nextLesson(time) {\r\n\r\n    var day = my_getWeekDay(currentDate(time));\r\n\r\n    let dayNumber = getDayNumber(day);\r\n\r\n    // Weekend\r\n    if (day == saturday) {\r\n        return week[dayNumber + 2].get_lessons()[0];\r\n    }\r\n\r\n    if (day == sunday) {\r\n        return week[dayNumber + 1].get_lessons()[0];\r\n    }\r\n\r\n    // Time after lessons ('15:00') at the end of the day\r\n    if (time >= day.get_lessons()[day.get_lessons().length - 1].get_endTime().get_time() ) {\r\n\r\n        // exclusion for friday (next lesson is the first lesson at monday)\r\n        if (day == friday) {\r\n            return week[2].get_lessons()[0];\r\n        }\r\n        return week[dayNumber + 1].get_lessons()[0];\r\n    }\r\n\r\n    // Time before lessons ('8:14') at the start of the day\r\n    if (time <= day.get_lessons()[0].get_startTime().get_time()) {\r\n        return day.get_lessons()[0];\r\n    }\r\n\r\n    // Loop that running at lessons array and getting next lesson\r\n    for (let i = 0;  i < day.get_lessons().length; i++){\r\n        \r\n        var lesson = day.get_lessons()[i];\r\n        var maxBreakLength = 1200; // in seconds\r\n\r\n        if (time >= lesson.get_startTime().get_time() & time <= lesson.get_endTime().get_time()) {\r\n\r\n            // exclusion for last lesson at friday\r\n            if (day == friday & lesson == day.get_lessons(day.get_lessonAmount() - 1)) {\r\n                return weel[0].get_lessons()[0];\r\n            }\r\n            return day.get_lessons()[i+1];\r\n        }\r\n        if (time + maxBreakLength >= lesson.get_startTime().get_time()) {\r\n            var next_lesson = lesson;\r\n        }\r\n    }\r\n    \r\n    // Break\r\n    return next_lesson;\r\n}\r\n\r\n// Counting estimated time to the next lesson\r\nfunction estTime(type, time) {\r\n\r\n    var day = my_getWeekDay(currentDate(time)); // getting current day for friday check\r\n\r\n    // estimated time to break end\r\n    if (type == 'break') {\r\n        let est = nextLesson(time).get_startTime().get_time();\r\n        return secondsToTime(est - time, 'short');\r\n    }\r\n\r\n    // estimated time to lesson end\r\n    if (type == 'lesson') {\r\n        let est = whatLessonNow(time).get_endTime().get_time();\r\n        return secondsToTime(est - time, 'short');\r\n    }\r\n\r\n    // estimated time to the start of first lesson today\r\n    if (type == 'before') {\r\n        let est = nextLesson(time).get_startTime().get_time();\r\n        return secondsToTime(est - time, 'long');\r\n    }\r\n\r\n    // estimated time to the start of first lesson tomorrow\r\n    if (type == 'after') {\r\n        let est = nextLesson(time).get_startTime().get_time();\r\n        if (day == friday) {\r\n            return secondsToTime(est + timeToSeconds(24, 0, 0, friday) - time, 'long');\r\n        }\r\n        return secondsToTime(est - time, 'long');\r\n    }\r\n}   \r\n\r\n\r\n// Updating status in header\r\n\r\n// For fast download of web page\r\nlet time = currentTime();\r\ncurrentStatus(whatLessonNow(time), time);\r\n\r\n// timer for every second update\r\nsetInterval(function () {\r\n\r\n    // Getting current time\r\n    let time = currentTime();\r\n\r\n    currentStatus(whatLessonNow(time), time);\r\n\r\n}, 1000);"],"file":"timer.dev.js"}
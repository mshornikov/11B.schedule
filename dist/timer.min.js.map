{"version":3,"sources":["timer.js"],"names":["zero_first_format","value","getWeekDay","date","sunday","monday","tuesday","wednesday","thursday","friday","saturday","getDayNumber","day","dayNumber","week","indexOf","timeToSeconds","hours","minutes","seconds","secondsToTime","time","length","toString","whatLessonNow","current_datetime","Date","getHours","getMinutes","getSeconds","estTime","i","get_lessons","get_startTime","get_time","get_endTime","get_name","nextLesson","whatLesson","type","est","document","getElementById","innerHTML","setInterval"],"mappings":"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","file":"timer.min.js","sourcesContent":["// Function which changing '1' -> '01'\r\nfunction zero_first_format(value) {\r\n    if (value < 10) {\r\n        value='0'+value;\r\n    }\r\n    return value;\r\n}\r\n\r\n// Function which replacing day number to day object ('0' -> saturday)\r\nfunction getWeekDay(date) {    \r\n    var week = [sunday, monday, tuesday, wednesday, thursday, friday, saturday]\r\n\r\n    return week[date.getDay()];\r\n    }\r\n\r\n// Function which replacing day object to day number (saturday -> '0')\r\nfunction getDayNumber(day) {\r\n    return dayNumber = week[week.indexOf(day)];\r\n}\r\n\r\n// Function which convert time from 8:01:01 to 28861 for comparing\r\nfunction timeToSeconds(hours, minutes, seconds, day) {\r\n    var dayNumber = week.indexOf(day);\r\n\r\n    // Converting time from 8:01:01 to 28861 for comparing\r\n    let time = dayNumber * 24 * 3600 + hours * 3600 + minutes * 60 + seconds;\r\n    return time;\r\n}\r\n\r\n// Function which convert time from 28861 to 8:01:01 for output\r\nfunction secondsToTime(time, length) {\r\n    if (length == 'seconds') {\r\n        return zero_first_format(~~((time % 3600) % 60)).toString();\r\n    }\r\n\r\n    if (length == 'minutes') {\r\n        return zero_first_format(~~((time % 3600) / 60)).toString();\r\n    }\r\n\r\n    if (length == 'hours') {\r\n        return (~~(((time / 24) % 3600 * 24) / 3600)).toString();\r\n    }\r\n\r\n    if (length == 'long') {\r\n        if ((~~(((time / 24) % 3600 * 24) / 3600)) == 0) {\r\n            return ~~((time % 3600) / 60).toString() + ':' + zero_first_format(~~((time % 3600) % 60)).toString();\r\n        }\r\n\r\n        return ((~~(((time / 24) % 3600 * 24) / 3600)) + (~~((time / 24) / 3600))).toString() + ':' + zero_first_format(~~((time % 3600) / 60)).toString() + ':' + zero_first_format(~~((time % 3600) % 60)).toString();\r\n    }\r\n\r\n    if (length == 'short') {\r\n        return ~~((time % 3600) / 60).toString() + ':' + zero_first_format(~~((time % 3600) % 60)).toString();\r\n    }\r\n}\r\n\r\n// Function whic by current time understands what lesson now\r\nfunction whatLessonNow() {\r\n\r\n    // Current time declaration\r\n    var current_datetime = new Date();\r\n    var hours = current_datetime.getHours();\r\n    var minutes = current_datetime.getMinutes();\r\n    var seconds = current_datetime.getSeconds();\r\n    var day = getWeekDay(current_datetime, week);\r\n\r\n    // Converting time from 8:01:01 to 28861 for comparing\r\n    let time = timeToSeconds(hours, minutes, seconds, day);\r\n\r\n    // Weekend\r\n    if (day == saturday | day == sunday) {\r\n        return 'Сегодня выходной' + '<br>До уроков: ' + estTime('weekend');\r\n    }\r\n\r\n    // Loop which\r\n    for (i in day.get_lessons()){\r\n        if (time >= day.get_lessons()[i].get_startTime().get_time() & time < day.get_lessons()[i].get_endTime().get_time()) {\r\n            return 'Сейчас: ' + day.get_lessons()[i].get_name() + '<br> Осталось ' + estTime('lesson');\r\n        }\r\n        if (time + 1200 >= day.get_lessons()[i].get_startTime().get_time()) {\r\n            var nextLesson = day.get_lessons()[i].get_name();\r\n        }\r\n    }\r\n\r\n\r\n    // Time after lessons ('15:00')\r\n    if (time >= day.get_lessons()[day.get_lessons().length - 1].get_endTime().get_time() ) {\r\n        return 'Уроки уже закончились' + '<br>До уроков: ' + estTime('weekend');\r\n    }\r\n\r\n    // Time before lessons ('8:14')\r\n    if (time + 1 <= day.get_lessons()[0].get_startTime().get_time()) {\r\n        return 'Уроки ещё не начались. <br>Первый урок: ' + day.get_lessons()[0].get_name() + '<br>До урока: ' + estTime('weekend');\r\n    }\r\n\r\n\r\n    // Break\r\n    return 'Перемена. Cледующий урок: ' + nextLesson + '<br>До урока ' + estTime('break');\r\n\r\n}\r\n\r\nfunction whatLesson() {\r\n    // Current time declaration\r\n    var current_datetime = new Date();\r\n    var hours = current_datetime.getHours();\r\n    var minutes = current_datetime.getMinutes();\r\n    var seconds = current_datetime.getSeconds();\r\n    var day = getWeekDay(current_datetime, week);\r\n\r\n    // Converting time from 8:01:01 to 28861 for comparing\r\n    let time = timeToSeconds(hours, minutes, seconds, day);\r\n\r\n    // Loop which\r\n    for (let i = 0;  i < day.get_lessons().length; i++){\r\n        if (time >= day.get_lessons()[i].get_startTime().get_time() & time < day.get_lessons()[i].get_endTime().get_time()) {\r\n            return day.get_lessons()[i];\r\n        }\r\n    }\r\n    \r\n    // Break\r\n    return;\r\n}\r\n\r\n// Updating status in header\r\ndocument.getElementById('current_status').innerHTML = whatLessonNow();\r\nsetInterval(function () {\r\n    document.getElementById('current_status').innerHTML = whatLessonNow();\r\n    // document.getElementById('est').innerHTML = estTime('lesson');\r\n}, 1000);\r\n\r\n// Function which understand which lesson is next\r\nfunction nextLesson() {\r\n    // Current time declaration\r\n    var current_datetime = new Date();\r\n    var hours = current_datetime.getHours();\r\n    var minutes = current_datetime.getMinutes();\r\n    var seconds = current_datetime.getSeconds();\r\n    var day = getWeekDay(current_datetime, week);\r\n\r\n    // Converting time from 8:01:01 to 28861 for comparing\r\n    let time = timeToSeconds(hours, minutes, seconds, day);\r\n\r\n    // Weekend\r\n    if (day == saturday) {\r\n        return week[week.indexOf(day) + 2].get_lessons()[0];\r\n    }\r\n\r\n    if (day == sunday) {\r\n        return week[week.indexOf(day) + 1].get_lessons()[0];\r\n    }\r\n\r\n    // Time after lessons ('15:00')\r\n    if (time >= day.get_lessons()[day.get_lessons().length - 1].get_endTime().get_time() ) {\r\n        return week[week.indexOf(day) + 1].get_lessons()[0];\r\n    }\r\n\r\n    // Time before lessons ('8:14')\r\n    if (time <= day.get_lessons()[0].get_startTime().get_time()) {\r\n        return day.get_lessons()[0];\r\n    }\r\n\r\n    // Loop which\r\n    for (let i = 0;  i < day.get_lessons().length; i++){\r\n        if (time >= day.get_lessons()[i].get_startTime().get_time() & time <= day.get_lessons()[i].get_endTime().get_time()) {\r\n            return day.get_lessons()[i+1];\r\n        }\r\n        if (time + 1200 >= day.get_lessons()[i].get_startTime().get_time()) {\r\n            var nextLesson = day.get_lessons()[i];\r\n        }\r\n    }\r\n    \r\n    // Break\r\n    return nextLesson;\r\n}\r\n\r\n// Function which counting estimated time to the next lesson\r\nfunction estTime(type) {\r\n\r\n    // Current time declaration\r\n    var current_datetime = new Date();\r\n    var hours = current_datetime.getHours();\r\n    var minutes = current_datetime.getMinutes();\r\n    var seconds = current_datetime.getSeconds();\r\n    var day = getWeekDay(current_datetime, week);\r\n\r\n    // Converting time from 8:01:01 to 28861 for comparing\r\n    var time = timeToSeconds(hours, minutes, seconds, day);\r\n\r\n    if (type == 'break') {\r\n        let est = nextLesson().get_startTime().get_time();\r\n        return secondsToTime(est - time, 'short');\r\n    }\r\n    if (type == 'lesson') {\r\n        let est = whatLesson().get_endTime().get_time();\r\n\r\n        return secondsToTime(est - time, 'short');\r\n    }\r\n    if (type == 'weekend') {\r\n        let est = nextLesson().get_startTime().get_time();\r\n        return secondsToTime(est - time, 'long');\r\n    }\r\n}"]}